{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Sinh viên</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
</head>
<body>

<div class="dashboard-wrapper">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="sidebar-logo">
           <!-- <img src="{% static 'img/logo.png' %}" alt="Logo">-->
            <span>QUẢN LÝ HOẠT ĐỘNG CỐ VẤN HỌC TẬP</span>
        </div>

       <ul class="sidebar-menu">
        <li>
            <a href="{% url 'dashboard' %}" class="active">Trang chủ</a>

            </li>
        <li><a href="{% url 'sinhvien' %}" class="sinhvien">Sinh viên</a></li>
        <li>Lịch tư vấn</li>
        <li>Thông báo</li>
        <li>Thống kê</li>
        <li><a href="{% url 'logout' %}" class="logout">Đăng xuất</a></li>
        </ul>

    </aside>

    <!-- MAIN -->
    <main class="main-content">
<header class="main-header">
    <div></div> <!-- giữ layout cân 2 bên -->
    <div class="user-box">
        <span>Xin chào, {{ request.user.get_full_name|default:request.user.username }}</span>
    </div>
</header>


        <!-- STATS -->
       <div class="row g-4 mb-4">
    <div class="col-md-4">
        <div class="stat-card blue">
            <h6>Sinh viên</h6>
            <h3>320</h3>
        </div>
    </div>

    <div class="col-md-4">
        <div class="stat-card purple">
            <h6>Lịch tư vấn</h6>
            <h3>58</h3>
        </div>
    </div>

    <div class="col-md-4">
        <div class="stat-card light">
            <h6>Thông báo</h6>
            <h3>12</h3>
        </div>
    </div>
</div>

<!-- CONTENT -->
<div class="content-box mt-4">
    <div class="d-flex align-items-center justify-content-between mb-4">
        <div class="d-flex align-items-center gap-3">
            <a href="{% url 'sinhvien' %}" class="btn btn-outline-secondary btn-sm">
               &nbsp; ←&nbsp;&nbsp;
            </a>
            <h5 class="mb-0">Chi tiết sinh viên</h5>
        </div>
    </div>

    <div class="row g-4">

        <!-- CỘT 1: THÔNG TIN CÁ NHÂN -->
        <div class="col-md-4">
            <div class="content-box h-100">
                <h6 class="mb-3">Thông tin cá nhân</h6>
                <p><strong>Mã sinh viên:</strong> {{ sinhvien.ma_sv }}</p>
                <p><strong>Họ tên:</strong> {{ sinhvien.ho_ten }}</p>
                <p><strong>Ngày sinh:</strong> {{ sinhvien.ngay_sinh }}</p>
                <p><strong>Giới tính:</strong> {{ sinhvien.gioi_tinh }}</p>
                <p><strong>Email:</strong> {{ sinhvien.email }}</p>
                <p><strong>Điện thoại:</strong> {{ sinhvien.dien_thoai }}</p>
                <p><strong>Lớp:</strong> {{ sinhvien.lop.ten_lop }}</p>
            </div>
        </div>

        <!-- CỘT 2: KẾT QUẢ HỌC TẬP -->
        <div class="col-md-4">
    <div class="content-box h-100 d-flex flex-column">
        <h6 class="mb-3">Kết quả học tập</h6>

        <table class="table table-sm table-hover mb-3">
            <thead class="table-light">
                <tr>
                    <th>Học kỳ</th>
                    <th>Điểm TB</th>
                    <th>Xếp loại</th>
                </tr>
            </thead>
            <tbody>
                {% for d in diem_hoc_tap %}
                <tr>
                    <td>{{ d.hoc_ky }}</td>
                    <td>{{ d.diem_trung_binh }}</td>
                    <td>{{ d.xep_loai }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3" class="text-center text-muted">
                        Chưa có dữ liệu
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- NÚT CHI TIẾT -->
        <div class="mt-auto text-end">
            <a href="{% url 'KetQuaMonHoc' sinhvien.id %}"
               class="btn btn-primary btn-sm">
                Xem chi tiết
            </a>
        </div>
    </div>
</div>


        <!-- CỘT 3: ĐIỂM RÈN LUYỆN -->
        <div class="col-md-4">
            <div class="content-box h-100">
                <h6 class="mb-3">Điểm rèn luyện</h6>

                <table class="table table-sm table-hover">
                    <thead class="table-light">
                        <tr>
                            <th>Học kỳ</th>
                            <th>Điểm</th>
                            <th>Xếp loại</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for d in diem_ren_luyen %}
                        <tr>
                            <td>{{ d.hoc_ky }}</td>
                            <td>{{ d.diem_ren_luyen }}</td>
                            <td>{{ d.xep_loai }}</td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="3" class="text-center text-muted">
                                Chưa có dữ liệu
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

    </div>
</div>
</body>
</html>