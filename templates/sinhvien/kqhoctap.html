{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Sinh vi√™n</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
</head>
<body>

<div class="dashboard-wrapper">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="sidebar-logo">
           <!-- <img src="{% static 'img/logo.png' %}" alt="Logo">-->
            <span>QU·∫¢N L√ù HO·∫†T ƒê·ªòNG C·ªê V·∫§N H·ªåC T·∫¨P</span>
        </div>

       <ul class="sidebar-menu">
        <li>
            <a href="{% url 'dashboard' %}" class="active">Trang ch·ªß</a>

            </li>
        <li><a href="{% url 'sinhvien' %}" class="sinhvien">Sinh vi√™n</a></li>
        <li>L·ªãch t∆∞ v·∫•n</li>
        <li>Th√¥ng b√°o</li>
        <li>Th·ªëng k√™</li>
        <li><a href="{% url 'logout' %}" class="logout">ƒêƒÉng xu·∫•t</a></li>
        </ul>

    </aside>

    <!-- MAIN -->
    <main class="main-content">
<header class="main-header">
    <div></div> <!-- gi·ªØ layout c√¢n 2 b√™n -->
    <div class="user-box">
        <span>Xin ch√†o, {{ request.user.get_full_name|default:request.user.username }}</span>
    </div>
</header>


        <!-- STATS -->
       <div class="row g-4 mb-4">
    <div class="col-md-4">
        <div class="stat-card blue">
            <h6>Sinh vi√™n</h6>
            <h3>320</h3>
        </div>
    </div>

    <div class="col-md-4">
        <div class="stat-card purple">
            <h6>L·ªãch t∆∞ v·∫•n</h6>
            <h3>58</h3>
        </div>
    </div>

    <div class="col-md-4">
        <div class="stat-card light">
            <h6>Th√¥ng b√°o</h6>
            <h3>12</h3>
        </div>
    </div>
</div>


<div class="content-box mt-4">

    <div class="d-flex align-items-center justify-content-between mb-3">
    <div class="d-flex align-items-center gap-3">
        <a href="{% url 'sinhvien' %}" class="btn btn-outline-secondary btn-sm">
            ‚Üê Quay l·∫°i
        </a>
        <h5 class="mb-0">K·∫øt qu·∫£ c√°c m√¥n h·ªçc</h5>
    </div>

    <!-- üîç FORM L·ªåC -->
    <form method="get" class="d-flex gap-2">
        <!-- L·ªçc h·ªçc k·ª≥ -->
        <select name="hoc_ky" class="form-select form-select-sm">
            <option value="">-- T·∫•t c·∫£ h·ªçc k·ª≥ --</option>
            {% for hk in hoc_kys %}
                <option value="{{ hk.id }}"
                    {% if hk.id|stringformat:"s" == selected_hoc_ky %}selected{% endif %}>
                    {{ hk }}
                </option>
            {% endfor %}
        </select>

        <!-- L·ªçc k·∫øt qu·∫£ -->
        <select name="ket_qua" class="form-select form-select-sm">
            <option value="">-- T·∫•t c·∫£ k·∫øt qu·∫£ --</option>
            <option value="ƒê·∫°t" {% if selected_ket_qua == "ƒê·∫°t" %}selected{% endif %}>ƒê·∫°t</option>
            <option value="Ch∆∞a ƒë·∫°t" {% if selected_ket_qua == "Ch∆∞a ƒë·∫°t" %}selected{% endif %}>Ch∆∞a ƒë·∫°t</option>
        </select>

        <button type="submit" class="btn btn-sm btn-primary">
            L·ªçc
        </button>
    </form>
</div>


    <p class="text-muted mb-3">
        Sinh vi√™n: <strong>{{ sinhvien.ho_ten }}</strong> ({{ sinhvien.ma_sv }})
    </p>

    <table class="table table-hover align-middle">
        <thead class="table-light">
            <tr>
                <th>M√¥n h·ªçc</th>
                <th>H·ªçc k·ª≥</th>
                <th>S·ªë t√≠n ch·ªâ</th>
                <th>ƒêi·ªÉm qu√° tr√¨nh</th>
                <th>ƒêi·ªÉm thi</th>
                <th>ƒêi·ªÉm t·ªïng k·∫øt</th>
                <th>K·∫øt qu·∫£</th>
            </tr>
        </thead>
        <tbody>
            {% for kq in mon_hoc %}
            <tr>
                <td>{{ kq.mon_hoc.ten_mon }}</td>
                <td>{{ kq.hoc_ky }}</td>
                <td>{{ kq.mon_hoc.so_tin_chi }}</td>
                <td>{{ kq.diem_qua_trinh }}</td>
                <td>{{ kq.diem_thi }}</td>
                <td>{{ kq.diem_tong_ket }}</td>
                <td>
                    {% if kq.ket_qua == "ƒê·∫°t" %}
                        <span class="badge bg-success">ƒê·∫°t</span>
                    {% else %}
                        <span class="badge bg-danger">Ch∆∞a ƒë·∫°t</span>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" class="text-center text-muted">
                    Ch∆∞a c√≥ d·ªØ li·ªáu k·∫øt qu·∫£ h·ªçc t·∫≠p
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

</body>
</html>
