{% extends 'base.html' %}
{% load static %}

{% block title %}Trang chủ{% endblock %}

{% block page_title %}Chào mừng, {{ covan.ho_ten }}!{% endblock %}
{% block page_subtitle %}Mã cố vấn: {{ covan.ma_cv }} - Lớp phụ trách: {{ covan.lop.ten_lop }}{% endblock %}

{% block content %}
<!-- Statistics Cards -->
<div class="row mb-4">
    <div class="col-lg-3 col-md-6">
        <div class="dashboard-card primary">
            <div class="d-flex align-items-center">
                <div class="flex-grow-1">
                    <h3 class="mb-0">{{ tong_sinh_vien }}</h3>
                    <h5 class="mb-0">Tổng sinh viên</h5>
                </div>
                <div class="ms-3">
                    <i class="bi bi-people-fill" style="font-size: 2.5rem; opacity: 0.7;"></i>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-lg-3 col-md-6">
        <div class="dashboard-card warning">
            <div class="d-flex align-items-center">
                <div class="flex-grow-1">
                    <h3 class="mb-0">{{ phieu_cho_phan_hoi }}</h3>
                    <h5 class="mb-0">Chờ phản hồi</h5>
                </div>
                <div class="ms-3">
                    <i class="bi bi-clock-history" style="font-size: 2.5rem; opacity: 0.7;"></i>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-lg-3 col-md-6">
        <div class="dashboard-card success">
            <div class="d-flex align-items-center">
                <div class="flex-grow-1">
                    <h3 class="mb-0">{{ danh_gia_moi.count }}</h3>
                    <h5 class="mb-0">Đánh giá mới</h5>
                </div>
                <div class="ms-3">
                    <i class="bi bi-star-fill" style="font-size: 2.5rem; opacity: 0.7;"></i>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-lg-3 col-md-6">
        <div class="dashboard-card info">
            <div class="d-flex align-items-center">
                <div class="flex-grow-1">
                    <h3 class="mb-0">{{ covan.lop.ten_lop }}</h3>
                    <h5 class="mb-0">Lớp phụ trách</h5>
                </div>
                <div class="ms-3">
                    <i class="bi bi-bookmark-fill" style="font-size: 2.5rem; opacity: 0.7;"></i>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Quick Actions & Recent Evaluations -->
<div class="row">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="bi bi-lightning-charge me-2"></i>Truy cập nhanh</h5>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-6">
                        <a href="{% url 'covan:sinhvien_list' %}" class="btn btn-outline-primary w-100 py-3">
                            <i class="bi bi-people d-block mb-2" style="font-size: 2rem;"></i>
                            <strong>Danh sách sinh viên</strong>
                            <small class="d-block text-muted">Quản lý sinh viên lớp</small>
                        </a>
                    </div>
                    <div class="col-md-6">
                        <a href="{% url 'tuvantuvan:tao_lich' %}" class="btn btn-outline-success w-100 py-3">
                            <i class="bi bi-calendar-plus d-block mb-2" style="font-size: 2rem;"></i>
                            <strong>Tạo lịch tư vấn</strong>
                            <small class="d-block text-muted">Lên lịch hẹn mới</small>
                        </a>
                    </div>
                    <div class="col-md-6">
                        <a href="{% url 'covan:bao_cao' %}" class="btn btn-outline-info w-100 py-3">
                            <i class="bi bi-file-earmark-text d-block mb-2" style="font-size: 2rem;"></i>
                            <strong>Xuất báo cáo</strong>
                            <small class="d-block text-muted">Báo cáo học tập chi tiết</small>
                        </a>
                    </div>
                    <div class="col-md-6">
                        <a href="{% url 'covan:thong_ke' %}" class="btn btn-outline-warning w-100 py-3">
                            <i class="bi bi-graph-up d-block mb-2" style="font-size: 2rem;"></i>
                            <strong>Thống kê lớp</strong>
                            <small class="d-block text-muted">Biểu đồ và phân tích</small>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="bi bi-star me-2"></i>Đánh giá mới nhất</h5>
            </div>
            <div class="card-body">
                {% if danh_gia_moi %}
                    {% for dg in danh_gia_moi %}
                    <div class="d-flex align-items-center mb-3">
                        <div class="bg-success rounded-circle p-2 me-3">
                            <i class="bi bi-person text-white"></i>
                        </div>
                        <div class="flex-grow-1">
                            <h6 class="mb-0">{{ dg.phieu.sinh_vien.ho_ten }}</h6>
                            <div class="d-flex align-items-center">
                                {% for i in "12345" %}
                                    <i class="bi bi-star{% if forloop.counter <= dg.diem_danh_gia %}-fill text-warning{% endif %} me-1"></i>
                                {% endfor %}
                                <small class="text-muted ms-2">{{ dg.diem_danh_gia }}/5</small>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="text-center text-muted py-3">
                        <i class="bi bi-star d-block mb-2" style="font-size: 2rem; opacity: 0.3;"></i>
                        <p class="mb-0">Chưa có đánh giá nào</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Class Overview -->
<div class="row mt-4">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="bi bi-graph-up me-2"></i>Tổng quan lớp học</h5>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-3">
                        <div class="stat-card" style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);">
                            <div class="stat-number">{{ tong_sinh_vien }}</div>
                            <div class="stat-label">Sinh viên</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                            <div class="stat-number">85%</div>
                            <div class="stat-label">Tỷ lệ đạt</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                            <div class="stat-number">4.2</div>
                            <div class="stat-label">Điểm TB</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);">
                            <div class="stat-number">92%</div>
                            <div class="stat-label">Tham gia</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="bi bi-info-circle me-2"></i>Thông tin liên hệ</h5>
            </div>
            <div class="card-body">
                <div class="d-flex align-items-center mb-3">
                    <div class="bg-primary rounded-circle p-2 me-3">
                        <i class="bi bi-envelope text-white"></i>
                    </div>
                    <div>
                        <h6 class="mb-0">Email</h6>
                        <small class="text-muted">{{ covan.email }}</small>
                    </div>
                </div>
                
                <div class="d-flex align-items-center mb-3">
                    <div class="bg-success rounded-circle p-2 me-3">
                        <i class="bi bi-telephone text-white"></i>
                    </div>
                    <div>
                        <h6 class="mb-0">Điện thoại</h6>
                        <small class="text-muted">{{ covan.dien_thoai }}</small>
                    </div>
                </div>
                
                <div class="d-flex align-items-center">
                    <div class="bg-info rounded-circle p-2 me-3">
                        <i class="bi bi-building text-white"></i>
                    </div>
                    <div>
                        <h6 class="mb-0">Khoa</h6>
                        <small class="text-muted">{{ covan.khoa.ten_khoa }}</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}